<?php

require_once('Database.php');


//$obj = new Database($name, $surname, $id_no, $dob);

if (isset($_POST) & !empty($_POST)) {
	if (mb_strlen($name < 3) && mb_strlen($name> 16)){
		echo "The name is invalid";
		return false;
	}else{
	$name = $database->sanitize($_POST['name']);
	}
	$surname = $database->sanitize($_POST['surname']);
	$id_no = $_POST['id_no'];
	$dob = $_POST['dob'];

	$res = $database->create($name, $surname, $id_no, $dob);
	if ($res) {
		echo "Successfully inserted data";
	} else {
		echo "failed to insert data";
	}
}
//header("location: view.php");
?>
<!DOCTYPE html>
<html>

<head>
	<title>User Form</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
	<div class="container">

		<div class="row well well-lg">

			<form method="post" class="form-horizontal col-md-6 col-md-offset-3">
				<h2 style="text-align:center; margin-bottom: 1em;">User Information Form</h2>
				<div class="form-group">
					<label for="input1" class="col-sm-2 control-label">First Name</label>
					<div class="col-sm-10">
						<input type="text" name="name" required class="form-control" id="input1" placeholder="Nelson Rholihlahla" />
					</div>
				</div>

				<div class="form-group">
					<label for="input1" class="col-sm-2 control-label">Last Name</label>
					<div class="col-sm-10">
						<input type="text" required name="surname" class="form-control" id="input1" placeholder="Mandela" />
					</div>
				</div>

				<div class="form-group">
					<label for="input1" class="col-sm-2 control-label">ID No:</label>
					<div class="col-sm-10">
						<input type="number" required name="id_no" class="form-control" id="input1" placeholder="7824140586547" />
					</div>
				</div>

				<div class="form-group">
					<label for="input1" class="col-sm-2 control-label">Date Of Birth</label>
					<div class="col-sm-10">
						<input type="date" data-date="" data-date-format="dd/mm/YYYY" required name="dob" class="form-control" id="input1" placeholder="E-Mail" />
					</div>
				</div>

				<input style="margin-left: 8em; width: 10em;" type="submit" class="btn btn-primary" value="Post" />
				<input type="delete" onclick='window.location.reload(true);' class="btn btn-danger" name="reset" type="reset" value="Cancel" />
				<br />
                              <div class="row well well-sm" style="text-align:center;"> 
				<a class="btn btn-primary" style="text-align:center;" href="view.php">View inserted data</a>
	                    </div>
			</form>
		</div>
	</div>
</body>

</html>

<VirtualHost *:82>
        ServerAdmin webmaster@localhost
        ServerName laravel.local
        ServerAlias 127.0.0.1 localhost laravel.local/laravel/laravel/public/
        DocumentRoot /var/www/html/laravel/laravel/public

        <Directory /var/www/html/laravel/laravel/public/>
                AllowOverride All
        </Directory>
        ErrorLog ${APACHE_LOG_DIR}/error.log
        LogLevel error
</VirtualHost>